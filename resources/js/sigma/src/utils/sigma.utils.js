(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";var t,i=this;sigma.utils=sigma.utils||{},sigma.utils.extend=function(){var t,i,e={};for(t=arguments.length-1;0<=t;t--)for(i in arguments[t])e[i]=arguments[t][i];return e},sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},sigma.utils.pkg=function(t){return(t||"").split(".").reduce(function(t,i){return i in t?t[i]:t[i]={}},i)},sigma.utils.id=(t=0,function(){return++t});var s={};sigma.utils.floatColor=function(t){if(s[t])return s[t];var i=t,e=0,a=0,n=0;"#"===t[0]?n=3===(t=t.slice(1)).length?(e=parseInt(t.charAt(0)+t.charAt(0),16),a=parseInt(t.charAt(1)+t.charAt(1),16),parseInt(t.charAt(2)+t.charAt(2),16)):(e=parseInt(t.charAt(0)+t.charAt(1),16),a=parseInt(t.charAt(2)+t.charAt(3),16),parseInt(t.charAt(4)+t.charAt(5),16)):t.match(/^ *rgba? *\(/)&&(e=+(t=t.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/))[1],a=+t[2],n=+t[3]);var r=256*e*256+256*a+n;return s[i]=r},sigma.utils.zoomTo=function(t,i,e,a,n){var r,s,u,o=t.settings;(s=Math.max(o("zoomMin"),Math.min(o("zoomMax"),t.ratio*a)))!==t.ratio&&(u={x:i*(1-(a=s/t.ratio))+t.x,y:e*(1-a)+t.y,ratio:s},n&&n.duration?(r=sigma.misc.animation.killAll(t),n=sigma.utils.extend(n,{easing:r?"quadraticOut":"quadraticInOut"}),sigma.misc.animation.camera(t,u,n)):(t.goTo(u),n&&n.onComplete&&n.onComplete()))},sigma.utils.getQuadraticControlPoint=function(t,i,e,a){return{x:(t+e)/2+(a-i)/4,y:(i+a)/2+(t-e)/4}},sigma.utils.getPointOnQuadraticCurve=function(t,i,e,a,n,r,s){return{x:Math.pow(1-t,2)*i+2*(1-t)*t*r+Math.pow(t,2)*a,y:Math.pow(1-t,2)*e+2*(1-t)*t*s+Math.pow(t,2)*n}},sigma.utils.getPointOnBezierCurve=function(t,i,e,a,n,r,s,u,o){var l=Math.pow(1-t,3),g=3*t*Math.pow(1-t,2),c=3*Math.pow(t,2)*(1-t),m=Math.pow(t,3);return{x:l*i+g*r+c*u+m*a,y:l*e+g*s+c*o+m*n}},sigma.utils.getSelfLoopControlPoints=function(t,i,e){return{x1:t-7*e,y1:i,x2:t,y2:i+7*e}},sigma.utils.getDistance=function(t,i,e,a){return Math.sqrt(Math.pow(e-t,2)+Math.pow(a-i,2))},sigma.utils.getCircleIntersection=function(t,i,e,a,n,r){var s,u,o,l,g,c,m,f,d;return u=a-t,o=n-i,!(e+r<(l=Math.sqrt(o*o+u*u)))&&(!(l<Math.abs(e-r))&&(d=i+o*(s=(e*e-r*r+l*l)/(2*l))/l,{xi:(f=t+u*s/l)+(c=(g=Math.sqrt(e*e-s*s))/l*-o),xi_prime:f-c,yi:d+(m=u*(g/l)),yi_prime:d-m}))},sigma.utils.isPointOnSegment=function(t,i,e,a,n,r,s){return Math.abs((i-a)*(n-e)-(t-e)*(r-a))/sigma.utils.getDistance(e,a,n,r)<s&&Math.min(e,n)<=t&&t<=Math.max(e,n)&&Math.min(a,r)<=i&&i<=Math.max(a,r)},sigma.utils.isPointOnQuadraticCurve=function(t,i,e,a,n,r,s,u,o){var l=sigma.utils.getDistance(e,a,n,r);if(Math.abs(t-e)>l||Math.abs(i-a)>l)return!1;for(var g,c=.5,m=sigma.utils.getDistance(t,i,e,a)<sigma.utils.getDistance(t,i,n,r)?-.01:.01,f=100,d=sigma.utils.getPointOnQuadraticCurve(c,e,a,n,r,s,u),h=sigma.utils.getDistance(t,i,d.x,d.y);0<f--&&0<=c&&c<=1&&o<h&&(.001<m||m<-.001);)g=h,d=sigma.utils.getPointOnQuadraticCurve(c,e,a,n,r,s,u),g<(h=sigma.utils.getDistance(t,i,d.x,d.y))?c+=m=-m/2:c+m<0||1<c+m?(m/=2,h=g):c+=m;return h<o},sigma.utils.isPointOnBezierCurve=function(t,i,e,a,n,r,s,u,o,l,g){var c=sigma.utils.getDistance(e,a,s,u);if(Math.abs(t-e)>c||Math.abs(i-a)>c)return!1;for(var m,f=.5,d=sigma.utils.getDistance(t,i,e,a)<sigma.utils.getDistance(t,i,n,r)?-.01:.01,h=100,v=sigma.utils.getPointOnBezierCurve(f,e,a,n,r,s,u,o,l),p=sigma.utils.getDistance(t,i,v.x,v.y);0<h--&&0<=f&&f<=1&&g<p&&(.001<d||d<-.001);)m=p,v=sigma.utils.getPointOnBezierCurve(f,e,a,n,r,s,u,o,l),m<(p=sigma.utils.getDistance(t,i,v.x,v.y))?f+=d=-d/2:f+d<0||1<f+d?(d/=2,p=m):f+=d;return p<g},sigma.utils.getX=function(t){return t.offsetX!==e&&t.offsetX||t.layerX!==e&&t.layerX||t.clientX!==e&&t.clientX},sigma.utils.getY=function(t){return t.offsetY!==e&&t.offsetY||t.layerY!==e&&t.layerY||t.clientY!==e&&t.clientY},sigma.utils.getPixelRatio=function(){var t=1;return window.screen.deviceXDPI!==e&&window.screen.logicalXDPI!==e&&window.screen.deviceXDPI>window.screen.logicalXDPI?t=window.screen.systemXDPI/window.screen.logicalXDPI:window.devicePixelRatio!==e&&(t=window.devicePixelRatio),t},sigma.utils.getWidth=function(t){var i=t.target.ownerSVGElement?t.target.ownerSVGElement.width:t.target.width;return"number"==typeof i&&i||i!==e&&i.baseVal!==e&&i.baseVal.value},sigma.utils.getCenter=function(t){var i=-1!==t.target.namespaceURI.indexOf("svg")?1:sigma.utils.getPixelRatio();return{x:sigma.utils.getWidth(t)/(2*i),y:sigma.utils.getHeight(t)/(2*i)}},sigma.utils.mouseCoords=function(t,i,e){return i=i||sigma.utils.getX(t),e=e||sigma.utils.getY(t),{x:i-sigma.utils.getCenter(t).x,y:e-sigma.utils.getCenter(t).y,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,shiftKey:t.shiftKey}},sigma.utils.getHeight=function(t){var i=t.target.ownerSVGElement?t.target.ownerSVGElement.height:t.target.height;return"number"==typeof i&&i||i!==e&&i.baseVal!==e&&i.baseVal.value},sigma.utils.getDelta=function(t){return t.wheelDelta!==e&&t.wheelDelta||t.detail!==e&&-t.detail},sigma.utils.getOffset=function(t){for(var i=0,e=0;t;)e+=parseInt(t.offsetTop),i+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:i}},sigma.utils.doubleClick=function(t,i,e){var a,n=0;t._doubleClickHandler=t._doubleClickHandler||{},t._doubleClickHandler[i]=t._doubleClickHandler[i]||[],(a=t._doubleClickHandler[i]).push(function(t){if(2===++n)return n=0,e(t);1===n&&setTimeout(function(){n=0},sigma.settings.doubleClickTimeout)}),t.addEventListener(i,a[a.length-1],!1)},sigma.utils.unbindDoubleClick=function(t,i){for(var e,a=(t._doubleClickHandler||{})[i]||[];e=a.pop();)t.removeEventListener(i,e);delete(t._doubleClickHandler||{})[i]},sigma.utils.easings=sigma.utils.easings||{},sigma.utils.easings.linearNone=function(t){return t},sigma.utils.easings.quadraticIn=function(t){return t*t},sigma.utils.easings.quadraticOut=function(t){return t*(2-t)},sigma.utils.easings.quadraticInOut=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},sigma.utils.easings.cubicIn=function(t){return t*t*t},sigma.utils.easings.cubicOut=function(t){return--t*t*t+1},sigma.utils.easings.cubicInOut=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},sigma.utils.loadShader=function(t,i,e,a){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(a&&a('Error compiling shader "'+n+'":'+t.getShaderInfoLog(n)),t.deleteShader(n),null)},sigma.utils.loadProgram=function(t,i,e,a,n){var r,s=t.createProgram();for(r=0;r<i.length;++r)t.attachShader(s,i[r]);if(e)for(r=0;r<e.length;++r)t.bindAttribLocation(s,locations?locations[r]:r,opt_attribs[r]);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)?s:(n&&n("Error in program linking: "+t.getProgramInfoLog(s)),t.deleteProgram(s),null)},sigma.utils.pkg("sigma.utils.matrices"),sigma.utils.matrices.translation=function(t,i){return[1,0,0,0,1,0,t,i,1]},sigma.utils.matrices.rotation=function(t,i){var e=Math.cos(t),a=Math.sin(t);return i?[e,-a,a,e]:[e,-a,0,a,e,0,0,0,1]},sigma.utils.matrices.scale=function(t,i){return i?[t,0,0,t]:[t,0,0,0,t,0,0,0,1]},sigma.utils.matrices.multiply=function(t,i,e){var a=e?2:3,n=t[0*a+0],r=t[0*a+1],s=t[0*a+2],u=t[1*a+0],o=t[1*a+1],l=t[1*a+2],g=t[2*a+0],c=t[2*a+1],m=t[2*a+2],f=i[0*a+0],d=i[0*a+1],h=i[0*a+2],v=i[1*a+0],p=i[1*a+1],w=i[1*a+2],y=i[2*a+0],b=i[2*a+1],P=i[2*a+2];return e?[n*f+r*v,n*d+r*p,u*f+o*v,u*d+o*p]:[n*f+r*v+s*y,n*d+r*p+s*b,n*h+r*w+s*P,u*f+o*v+l*y,u*d+o*p+l*b,u*h+o*w+l*P,g*f+c*v+m*y,g*d+c*p+m*b,g*h+c*w+m*P]}}).call(this);