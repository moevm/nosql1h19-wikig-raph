(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.mouse=function(e,t,i){var o,a,n,u,m,r,l,g,c,s,d,v=this,p=e,E=t,f=i;function h(e){var t,i,s;if(f("mouseEnabled")&&(v.dispatchEvent("mousemove",sigma.utils.mouseCoords(e)),l))return c=g=!0,d&&clearTimeout(d),d=setTimeout(function(){g=!1},f("dragTimeout")),sigma.misc.animation.killAll(E),E.isMoving=!0,s=E.cameraPosition(sigma.utils.getX(e)-m,sigma.utils.getY(e)-r,!0),t=o-s.x,i=a-s.y,t===E.x&&i===E.y||(n=E.x,u=E.y,E.goTo({x:t,y:i})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function b(e){if(f("mouseEnabled")&&l){l=!1,d&&clearTimeout(d),E.isMoving=!1;var t=sigma.utils.getX(e),i=sigma.utils.getY(e);g?(sigma.misc.animation.killAll(E),sigma.misc.animation.camera(E,{x:E.x+f("mouseInertiaRatio")*(E.x-n),y:E.y+f("mouseInertiaRatio")*(E.y-u)},{easing:"quadraticOut",duration:f("mouseInertiaDuration")})):m===t&&r===i||E.goTo({x:E.x,y:E.y}),v.dispatchEvent("mouseup",sigma.utils.mouseCoords(e)),g=!1}}function k(e){if(f("mouseEnabled"))switch(o=E.x,a=E.y,n=E.x,u=E.y,m=sigma.utils.getX(e),r=sigma.utils.getY(e),c=!1,s=(new Date).getTime(),e.which){case 2:break;case 3:v.dispatchEvent("rightclick",sigma.utils.mouseCoords(e,m,r));break;default:l=!0,v.dispatchEvent("mousedown",sigma.utils.mouseCoords(e,m,r))}}function D(e){f("mouseEnabled")&&v.dispatchEvent("mouseout")}function x(e){if(f("mouseEnabled")){var t=sigma.utils.mouseCoords(e);t.isDragging=100<(new Date).getTime()-s&&c,v.dispatchEvent("click",t)}return e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function y(e){var t,i,s,o=sigma.utils.getDelta(e);if(f("mouseEnabled")&&f("mouseWheelEnabled")&&0!==o)return i=0<o?1/f("zoomingRatio"):f("zoomingRatio"),t=E.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),s={duration:f("mouseZoomDuration")},sigma.utils.zoomTo(E,t.x,t.y,i,s),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(p,"click",function(e){var t,i,s;if(f("mouseEnabled"))return i=1/f("doubleClickZoomingRatio"),v.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,m,r)),f("doubleClickEnabled")&&(t=E.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),s={duration:f("doubleClickZoomDuration")},sigma.utils.zoomTo(E,t.x,t.y,i,s)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}),p.addEventListener("DOMMouseScroll",y,!1),p.addEventListener("mousewheel",y,!1),p.addEventListener("mousemove",h,!1),p.addEventListener("mousedown",k,!1),p.addEventListener("click",x,!1),p.addEventListener("mouseout",D,!1),document.addEventListener("mouseup",b,!1),this.kill=function(){sigma.utils.unbindDoubleClick(p,"click"),p.removeEventListener("DOMMouseScroll",y),p.removeEventListener("mousewheel",y),p.removeEventListener("mousemove",h),p.removeEventListener("mousedown",k),p.removeEventListener("click",x),p.removeEventListener("mouseout",D),document.removeEventListener("mouseup",b)}}}).call(this);